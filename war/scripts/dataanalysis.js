function SampleSet(a,b){
    //a = number of sample, b = dimension of sample
    this.random(a,b);
    return true
};

SampleSet.prototype.random = function(a,b){
    this.model = [];
    for(var i = 0; i<a; i++){
        for(var j = 0; j<b; j++){
            this.model.push(Math.random());
        }
    }
};

function drawall(){
	x2 = [0.841253038495779, 0.5687335627153516, 0.6907440996728837, 0.09797802707180386, 0.4897135484497994, 0.7863120664842427, 0.0253133787773549, 0.7249728222377598, 0.0726108136586846, 0.40709263109602034, 0.7228248594328761, 0.31366712995804846, 0.09201110200956458, 0.7130493992008269, 0.5464380003977567, 0.4651474461425096, 0.8347805023659021, 0.16404850082471967, 0.133369229733944, 0.3455470958724618];
	x11 = [0.18759035715842393, 0.6271454406787459, 0.7325707368097709, 0.9088593300535355, 0.06351228805510961, 0.916706382467992, 0.5536753188083037, 0.6410173305251456, 0.13736516482725541, 0.9187949889495908, 0.02470059640950445, 0.5313062608484914, 0.009173280405644468, 0.4346465372445024, 0.240018239944282, 0.5540511885802754, 0.9745751424980076, 0.5988561286410415, 0.45390823199388874, 0.20443915840790094];
	x12 = [0.8584431160707027, 0.7765277442522347, 0.6438184194266796, 0.6010208108928055, 0.2195597800891846, 0.20521000982262194, 0.16988039086572818, 0.26524806302040815, 0.8838992491364479, 0.8961931364610791, 0.3474190898705274, 0.9838206877466291, 0.6835693991743028, 0.20410333387553692, 0.8162750939372927, 0.7608717218972743, 0.8512061745859683, 0.3048162767663598, 0.9851749096997082, 0.8646308409515768];
	t = [0.08490284625440836, 0.7250605516601354, 0.49084240989759564, 0.8836038378067315, 0.7413998683914542, 0.09480915660969913, 0.18504029954783618, 0.3564314048271626, 0.9670293910894543, 0.176257113693282, 0.4897087689023465, 0.8304607991594821, 0.5369950900785625, 0.3521321713924408, 0.08876096713356674, 0.5809788038022816, 0.24029996385797858, 0.8087500671390444, 0.6789093757979572, 0.054195161908864975];
	x33 = [0.21813480680327613, 0.7320265861279859, 0.35328774274957897, 0.5573829966440947, 0.9959067089749059, 0.38803649262688, 0.008795042759856597, 0.5322703265304262, 0.9772209877392509, 0.7682312890370634, 0.7105320023767493, 0.9175922297819143, 0.058074974301969506, 0.8882314769244284, 0.2499233769807615, 0.67097643788821, 0.9116671756587209, 0.5576269087170199, 0.38381832356641254, 0.5027516189827897];
	x20 = [0.14058426177625788, 0.5454127624497014, 0.01831628343771513, 0.4408836378766694, 0.668081493357569, 0.532187982413487, 0.5299325544936664, 0.8183841948011719, 0.9910683397350859, 0.37648997507596216, 0.6009396575803625, 0.701616951708105, 0.34837499424325746, 0.17531700259352845, 0.21677458161619578, 0.9287956466230991, 0.15349786560452217, 0.3762572501903787, 0.5346125968829514, 0.22966184106600762];
	x17 = [0.5370735606686844, 0.7666751877457882, 0.008422190600315571, 0.3791292595172654, 0.9710260510548512, 0.4829764626632431, 0.7811195192705658, 0.08535160214341397, 0.9846431421939905, 0.09872851970576096, 0.31052554944366606, 0.25538893119191675, 0.6579378538726144, 0.5524998668946906, 0.49908297645732747, 0.19168422917590994, 0.9499579302660632, 0.2599013508497734, 0.7760567753060597, 0.12138916366342645];
	x31 = [0.057669626903392834, 0.4309988616070054, 0.5641123935314081, 0.08865722261394693, 0.00559326545344252, 0.5381173235361199, 0.6899343591978182, 0.3174499862046892, 0.6863713130589589, 0.5755550136757599, 0.45226260799646134, 0.7581813980437065, 0.1916905949471457, 0.37957172829592734, 0.7473465154281462, 0.08898512033755368, 0.18640853573640426, 0.8232340326242519, 0.9579237766489923, 0.11020945337997928];
	x21 = [0.2607276865759992, 0.3514452780221621, 0.16791149495172786, 0.051822618614903615, 0.7715598483694149, 0.5927171946107338, 0.3203170818485759, 0.06126426932133705, 0.373208985087892, 0.7653405628557014, 0.8807763516700154, 0.4757682864939575, 0.9148629844813436, 0.17676503002085175, 0.467001463356036, 0.9729854936995797, 0.6579815222324461, 0.641776030835595, 0.03355640600629073, 0.08733354089930795];
	x19 = [0.09339389219079558, 0.7117116258708752, 0.7093432674660924, 0.09701785425927695, 0.9831725964917015, 0.16572110767473897, 0.10595436674883119, 0.6824010434909137, 0.8653920272355335, 0.4259148714712434, 0.2546036505080793, 0.3846914077703978, 0.5770001883042278, 0.1381999347930858, 0.5512984800815423, 0.19120171172001466, 0.9257176397206696, 0.3755704077745725, 0.007078960497798548, 0.06346942486998197];
	x43 = [0.10644352705799665, 0.6758459125588085, 0.09391464402063632, 0.8274600644936982, 0.7183398459531791, 0.23463409143534897, 0.2623101956507713, 0.09755830707362056, 0.39093958596803835, 0.8037381885361221, 0.12571249348221714, 0.8633398089564253, 0.7804207838566196, 0.40503922520745106, 0.9836248003343299, 0.3534181523010256, 0.8658748643915164, 0.28648520869965155, 0.12543106917119046, 0.5843632181450382];
	x44 = [0.20682411076501273, 0.7458000499768919, 0.29974075118359433, 0.5680415670027568, 0.5064858367677594, 0.32172814516503123, 0.042870349277339515, 0.6213673365179038, 0.22601432887095296, 0.8420321597485473, 0.2617835104573152, 0.39385331737561013, 0.13192917218035327, 0.2989921465574795, 0.9357588480667443, 0.18803186984808495, 0.8257775330623228, 0.820369580484508, 0.7485186963679167, 0.5299778270272945];
	x23 = [0.9176034913853872, 0.26889593847596394, 0.23761079354926826, 0.6770853769302169, 0.48610334271570943, 0.8866728847465695, 0.19716562647025912, 0.2710179280266062, 0.9338198399161377, 0.7386890557076918, 0.2488835311294508, 0.4877268178240072, 0.9733399307639625, 0.1745159729572041, 0.7823170801160286, 0.004089871330150707, 0.22150313322890308, 0.47644632764578787, 0.3478980706757384, 0.4334006921964665];
	x27 = [0.10506454514057484, 0.2328559332801417, 0.004559450959130906, 0.8833178656557987, 0.7672951707272325, 0.7659649036349165, 0.5894057862645059, 0.3693994738203046, 0.527369285144299, 0.13895089060144317, 0.453712580638728, 0.8266150525817915, 0.2774225130869109, 0.12695095335440598, 0.8325421704087957, 0.37009785602803, 0.08748891507109857, 0.7820340477712652, 0.6465737539484311, 0.8053556436274465];
	x34 = [0.8239433594529104, 0.8110316965738976, 0.5756026886354352, 0.9222747938600933, 0.38345347998653667, 0.34388473733388103, 0.04160100612244927, 0.5975441033522062, 0.7208429365916461, 0.18810310188501067, 0.9637336385191265, 0.924718622182336, 0.3538481361130562, 0.07766660121326996, 0.09858393339070404, 0.7070230646885141, 0.9857895777519918, 0.33403833773305347, 0.46095149311477224, 0.49343324683486856];
	x41 = [0.21557695591996973, 0.6311208108805343, 0.3474110529378718, 0.8796866222487428, 0.23746810524705075, 0.6627753921326321, 0.26997051277511463, 0.32025448075571716, 0.833882971872272, 0.48678789472108497, 0.8332953828270453, 0.6743914632810345, 0.4687484508772797, 0.011041380693423752, 0.7440882225105554, 0.10773876563078721, 0.6523411583215503, 0.6087426095453652, 0.8495124838782449, 0.6514101367629245];
	
	x518 = [0.12783302660136858, 0.7701182581648451, 0.48573301877989195, 0.6700647361297966, 0.48030047812045873, 0.32730709342865216, 0.28945707562273304, 0.13408670803127165, 0.7980190939567121, 0.4841226706682533, 0.13486208376811643, 0.7597085737725171, 0.8386930050150398, 0.15161724763518758, 0.8006615940771702, 0.8494132705620148, 0.18728356078537867, 0.3560547062267648, 0.9383867421560398, 0.3330442612920058];
	x519 = [0.8239433594529105, 0.8110316965738976, 0.5756026886354352, 0.9222747938600931, 0.38345347998653667, 0.34388473733388103, 0.041601006122449324, 0.5975441033522062, 0.7208429365916461, 0.18810310188501056, 0.9637336385191265, 0.924718622182336, 0.3538481361130562, 0.07766660121326996, 0.09858393339070404, 0.7070230646885141, 0.9857895777519918, 0.33403833773305347, 0.46095149311477224, 0.49343324683486856];
	
	x00 = [0.6841629552654922, 0.9367051252629608, 0.9260151085909456, 0.1969469110481441, 0.3891235231421888, 0.2806159076280892, 0.05846579163335264, 0.23373332852497697, 0.3859610629733652, 0.5321998817380518, 0.9733098486904055, 0.12140207807533443, 0.545932445442304, 0.5160355526022613, 0.11524888896383345, 0.3907057966571301, 0.90114501491189, 0.4024150148034096, 0.010841787327080965, 0.7395614152774215];
	x02 = [0.8584431160707027, 0.7765277442522347, 0.6438184194266796, 0.6010208108928055, 0.21955978008918464, 0.20521000982262194, 0.16988039086572826, 0.26524806302040815, 0.8838992491364479, 0.8961931364610791, 0.3474190898705274, 0.9838206877466291, 0.6835693991743028, 0.20410333387553692, 0.8162750939372927, 0.7608717218972743, 0.8512061745859683, 0.3048162767663598, 0.9851749096997082, 0.8646308409515768];
	x05 = [0.3061517912428826, 0.8054428251925856, 0.3058913005515933, 0.44651250122115016, 0.9303421746008098, 0.5613519418984652, 0.7155384039506316, 0.7598516445141286, 0.9995406719390303, 0.9414636266883463, 0.10379167227074504, 0.554072190541774, 0.17255783476866782, 0.17992673069238663, 0.4260615811217576, 0.9623677409254014, 0.6002786306198686, 0.7582417211961001, 0.7037887973710895, 0.5122450834605843];
	
	x14 = [0.8584431160707027, 0.7765277442522347, 0.6438184194266796, 0.6010208108928055, 0.21955978008918464, 0.20521000982262194, 0.16988039086572826, 0.26524806302040815, 0.8838992491364479, 0.8961931364610791, 0.3474190898705274, 0.9838206877466291, 0.6835693991743028, 0.20410333387553692, 0.8162750939372927, 0.7608717218972743, 0.8512061745859683, 0.3048162767663598, 0.9851749096997082, 0.8646308409515768];
	x16 = [0.733421312804454, 0.8991545536031047, 0.6858317747131837, 0.4843037438219758, 0.29568644803752475, 0.08481742489352961, 0.49022816446127426, 0.2354386464278234, 0.3376276187226426, 0.820965117546396, 0.5483853063212684, 0.4631838970811476, 0.7123949669579415, 0.3528094796024166, 0.5711580740383645, 0.7610900643084969, 0.9314932278489555, 0.4929580269105746, 0.6242083247132197, 0.8518446565102035];
	
	x27 = [0.8584431160707027, 0.7765277442522347, 0.6438184194266796, 0.6010208108928055, 0.21955978008918464, 0.20521000982262194, 0.16988039086572826, 0.26524806302040815, 0.8838992491364479, 0.8961931364610791, 0.3474190898705274, 0.9838206877466291, 0.6835693991743028, 0.20410333387553692, 0.8162750939372927, 0.7608717218972743, 0.8512061745859683, 0.3048162767663598, 0.9851749096997082, 0.8646308409515768];
	x210 = [0.12783302660136864, 0.7701182581648451, 0.48573301877989195, 0.6700647361297966, 0.48030047812045873, 0.32730709342865216, 0.28945707562273304, 0.13408670803127165, 0.7980190939567121, 0.4841226706682533, 0.13486208376811648, 0.7597085737725171, 0.8386930050150398, 0.15161724763518758, 0.8006615940771702, 0.8494132705620148, 0.18728356078537867, 0.3560547062267648, 0.9383867421560398, 0.3330442612920058];
	
	x312 = [0.12783302660136864, 0.7701182581648451, 0.48573301877989195, 0.6700647361297966, 0.48030047812045873, 0.32730709342865216, 0.28945707562273304, 0.13408670803127165, 0.7980190939567121, 0.4841226706682533, 0.13486208376811648, 0.7597085737725171, 0.8386930050150398, 0.15161724763518758, 0.8006615940771702, 0.8494132705620148, 0.18728356078537867, 0.3560547062267648, 0.9383867421560398, 0.3330442612920058];
	x314 = [0.12783302660136864, 0.7701182581648451, 0.48573301877989195, 0.6700647361297966, 0.48030047812045873, 0.32730709342865216, 0.28945707562273304, 0.13408670803127165, 0.7980190939567121, 0.4841226706682533, 0.13486208376811648, 0.7597085737725171, 0.8386930050150398, 0.15161724763518758, 0.8006615940771702, 0.8494132705620148, 0.18728356078537867, 0.3560547062267648, 0.9383867421560398, 0.3330442612920058];

	
	x415 = [0.12783302660136864, 0.7701182581648451, 0.48573301877989195, 0.6700647361297966, 0.48030047812045873, 0.32730709342865216, 0.28945707562273304, 0.13408670803127165, 0.7980190939567121, 0.4841226706682533, 0.13486208376811643, 0.7597085737725171, 0.8386930050150398, 0.15161724763518758, 0.8006615940771702, 0.8494132705620148, 0.18728356078537867, 0.3560547062267648, 0.9383867421560398, 0.3330442612920058];
	x416 = [0.8239433594529105, 0.8110316965738976, 0.5756026886354352, 0.9222747938600931, 0.38345347998653667, 0.34388473733388103, 0.041601006122449324, 0.5975441033522062, 0.7208429365916461, 0.18810310188501056, 0.9637336385191265, 0.924718622182336, 0.3538481361130562, 0.07766660121326996, 0.09858393339070404, 0.7070230646885141, 0.9857895777519918, 0.33403833773305347, 0.46095149311477224, 0.49343324683486856];
	x417 = [0.8669980015389929, 0.8851476487325916, 0.49291197248809304, 0.6056747459988236, 0.530952662347624, 0.7910148174076022, 0.4287548669553578, 0.3590431303178411, 0.28479588863691435, 0.22315693230130862, 0.7394376648552747, 0.8319766129072036, 0.05015421732658931, 0.6559364412355964, 0.4711184819129286, 0.38619745005908923, 0.3150180030534253, 0.3664764002535478, 0.5797934085829274, 0.1385872208146981];
	x418 = [0.5370735606686844, 0.7666751877457882, 0.008422190600315682, 0.3791292595172654, 0.9710260510548512, 0.4829764626632431, 0.7811195192705658, 0.08535160214341397, 0.9846431421939905, 0.09872851970576091, 0.31052554944366606, 0.25538893119191675, 0.6579378538726144, 0.5524998668946906, 0.49908297645732747, 0.19168422917590988, 0.9499579302660631, 0.2599013508497734, 0.7760567753060597, 0.12138916366342645];
	x419 = [0.24732269669320017, 0.7386094454082488, 0.011872241584548693, 0.905209909466814, 0.26412968251457625, 0.0570234738333133, 0.3754538490559236, 0.898727994888154, 0.3476381414815922, 0.28735370468799604, 0.29172311587921196, 0.6333708354321667, 0.6762928061179754, 0.31895360099474257, 0.44400363521636577, 0.8005688742237987, 0.44797433690777705, 0.48442952599387046, 0.6654362219077329, 0.8447638273383572];
	x420 = [0.09339389219079552, 0.7117116258708752, 0.7093432674660924, 0.097017854259277, 0.9831725964917015, 0.1657211076747389, 0.10595436674883119, 0.6824010434909137, 0.8653920272355335, 0.4259148714712434, 0.2546036505080793, 0.3846914077703978, 0.5770001883042278, 0.1381999347930858, 0.5512984800815423, 0.19120171172001466, 0.9257176397206696, 0.3755704077745725, 0.007078960497798437, 0.06346942486998208];
	
	x518 = [0.12783302660136858, 0.7701182581648451, 0.48573301877989195, 0.6700647361297966, 0.48030047812045873, 0.32730709342865216, 0.28945707562273304, 0.13408670803127165, 0.7980190939567121, 0.4841226706682533, 0.13486208376811643, 0.7597085737725171, 0.8386930050150398, 0.15161724763518758, 0.8006615940771702, 0.8494132705620148, 0.18728356078537867, 0.3560547062267648, 0.9383867421560398, 0.3330442612920058];
	x519 = [0.8239433594529105, 0.8110316965738976, 0.5756026886354352, 0.9222747938600931, 0.38345347998653667, 0.34388473733388103, 0.041601006122449324, 0.5975441033522062, 0.7208429365916461, 0.18810310188501056, 0.9637336385191265, 0.924718622182336, 0.3538481361130562, 0.07766660121326996, 0.09858393339070404, 0.7070230646885141, 0.9857895777519918, 0.33403833773305347, 0.46095149311477224, 0.49343324683486856];
	x520 = [0.09339389219079552, 0.7117116258708752, 0.7093432674660924, 0.097017854259277, 0.9831725964917015, 0.1657211076747389, 0.10595436674883119, 0.6824010434909137, 0.8653920272355335, 0.4259148714712434, 0.2546036505080793, 0.3846914077703978, 0.5770001883042278, 0.1381999347930858, 0.5512984800815423, 0.19120171172001466, 0.9257176397206696, 0.3755704077745725, 0.007078960497798437, 0.06346942486998208];
	x521 = [0.14058426177625782, 0.5454127624497014, 0.018316283437715186, 0.4408836378766694, 0.668081493357569, 0.532187982413487, 0.5299325544936664, 0.8183841948011719, 0.9910683397350859, 0.37648997507596216, 0.6009396575803625, 0.701616951708105, 0.34837499424325746, 0.17531700259352845, 0.21677458161619578, 0.9287956466230991, 0.15349786560452217, 0.3762572501903787, 0.5346125968829514, 0.22966184106600768];
	x522 = [0.2607276865759992, 0.3514452780221621, 0.16791149495172786, 0.05182261861490367, 0.7715598483694149, 0.5927171946107338, 0.3203170818485759, 0.061264269321337106, 0.373208985087892, 0.7653405628557014, 0.8807763516700154, 0.4757682864939575, 0.9148629844813436, 0.17676503002085175, 0.467001463356036, 0.9729854936995797, 0.6579815222324461, 0.641776030835595, 0.03355640600629067, 0.0873335408993079];
	x523 = [0.5027461542812325, 0.6921960936989663, 0.5619841889016031, 0.06666880856440593, 0.20829096594077945, 0.4312896554063901, 0.05006375115910067, 0.9815779626037726, 0.90601692673455, 0.9397196802217453, 0.41852826380888775, 0.534710437598159, 0.4063881800315031, 0.5846729927636134, 0.8561179195702963, 0.4596601024129995, 0.2507097953773658, 0.3675949378700103, 0.9033347457400394, 0.4722582165973179];
	new ViewerCanvas3D('car1', 0, 290, 170, x518);
	new ViewerCanvas3D('car2', 1, 290, 170, x519);
	new ViewerCanvas3D('car3', 2, 290, 170, x520);
	new ViewerCanvas3D('car4', 3, 290, 170, x521);
	new ViewerCanvas3D('car5', 4, 290, 170, x522);
	new ViewerCanvas3D('car6', 5, 290, 170, x523);
}

function drawlast(){
	x = [0.12783302660136858, 0.7701182581648451, 0.48573301877989195, 0.6700647361297966, 0.48030047812045873, 0.32730709342865216, 0.28945707562273304, 0.1340867080312716, 0.7980190939567121, 0.4841226706682533, 0.13486208376811643, 0.7597085737725171, 0.8386930050150398, 0.15161724763518758, 0.8006615940771702, 0.8494132705620148, 0.1872835607853785, 0.3560547062267648, 0.9383867421560399, 0.3330442612920058, 0.21557695591996973, 0.6311208108805343, 0.3474110529378718, 0.8796866222487428, 0.23746810524705075, 0.6627753921326321, 0.26997051277511463, 0.32025448075571716, 0.833882971872272, 0.48678789472108497, 0.8332953828270453, 0.6743914632810345, 0.4687484508772797, 0.011041380693423752, 0.7440882225105554, 0.10773876563078721, 0.6523411583215503, 0.6087426095453652, 0.8495124838782449, 0.6514101367629245, 0.3802561729925962, 0.39132175251463974, 0.26365713288611026, 0.6744622656400249, 0.5660920294322109, 0.09634312934303202, 0.03832494585720192, 0.4754446954467846, 0.875401543252203, 0.4634263964488484, 0.008256186177256208, 0.246202895263962, 0.14964646338937382, 0.12169250326768222, 0.5151537579569008, 0.2222300171683546, 0.9186176237883755, 0.6967286961329048, 0.4427182382478877, 0.7563334173085384, 0.10644352705799665, 0.6758459125588085, 0.09391464402063632, 0.8274600644936982, 0.7183398459531791, 0.23463409143534897, 0.2623101956507713, 0.09755830707362056, 0.39093958596803835, 0.8037381885361221, 0.12571249348221714, 0.8633398089564253, 0.7804207838566196, 0.40503922520745106, 0.9836248003343299, 0.3534181523010256, 0.8658748643915164, 0.28648520869965155, 0.12543106917119046, 0.5843632181450382, 0.20682411076501273, 0.7458000499768919, 0.29974075118359433, 0.5680415670027568, 0.5064858367677594, 0.32172814516503123, 0.042870349277339515, 0.6213673365179038, 0.22601432887095296, 0.8420321597485473, 0.2617835104573152, 0.39385331737561013, 0.13192917218035327, 0.2989921465574795, 0.9357588480667443, 0.18803186984808495, 0.8257775330623228, 0.820369580484508, 0.7485186963679167, 0.5299778270272945, 0.6770540271563897, 0.02398245435586266, 0.143612203336277, 0.4282266931413785, 0.6467545764807412, 0.1855971936793872, 0.2247763805333356, 0.974030980021302, 0.6931247959682715, 0.5904362463836614, 0.32399285609789596, 0.8713270007030022, 0.6252294260554134, 0.6343902522247072, 0.9973453818293494, 0.5902766809352747, 0.6303774867085421, 0.8185635423383363, 0.013635794125546274, 0.4225334391997271];
	for (i = 0; i<6; i++){
		new ViewerCanvas3D('car'+(i+1), i, 290, 170, x.slice(i*20,(i+1)*20));
	}
}

function overview(){
	p=20;
	numiter = d.dataArray.datArray.length;
	numdata = d.dataArray.datArray[numiter-1].length;
	alldata = d.dataArray.datArray[numiter-1];
	alllabel= d.dataArray.labArray[numiter-1];
	this.target = d.dataArray.target;

	distance = [];
	distanceeu = [];
	xnow = [];
	mind = 10;
	for(var i=0;i<numdata;i++){
	    dist = 0;
	    for(var j=0;j<p;j++){
	        xnow[i*p+j] = alldata[i][j];
	    }
	    distance[i] = calDistance(this.target, xnow.slice(i*p,(i+1)*p));
	    distanceeu[i] = geoDistance(this.target, xnow.slice(i*p,(i+1)*p));
	    if (dist<mind){mind=dist;machinechoice = i;};
	    if (alllabel[i]==1){userchoice = i;}
	}
	x1 = alldata[userchoice];
	y1 = alldata[machinechoice];
	
	this.distance = distance;
	this.distanceeu = distanceeu;
	this.user = x1;
	this.machine = y1;
	this.userchoice = userchoice;
	this.machinechoice = machinechoice;
	getInd(this);
	
	this.distanceM = [];
	this.distanceeuM = [];
	for(var i=0;i<numdata;i++){
		for(var j=0;j<numdata;j++){
			this.distanceM[i*numdata+j]=calDistance(alldata[i], alldata[j]);
			this.distanceeuM[i*numdata+j]=geoDistance(alldata[i], alldata[j]);
		}
	}
}

function calAngle(Input){
	var origin = [5, 0, 0];
    var well_scale = 2.0;
    var r_wheel = 0.60;
    var wheel_scale = 1.2;
    var box_r = 10.0;
    var clearance = 0.7*r_wheel;
    var box_l = origin[0]-2*r_wheel;
    var box_u = 2.5*r_wheel;
    var roof_end_pt_x = 5.0 - origin[0]; //higher limit on @roof_end_pt
    var bw_end_pt_x = 7.5 - origin[0]; //higher limit on @bw_end_pt
    var roof_end_pt_z = r_wheel * well_scale + 1.5 - origin[2]; //lower limit on @roof_end_pt   
    var bw_end_pt_z = r_wheel*well_scale*wheel_scale*1.1+0.1; //lower limit on @bw_end_pt
    var hood_u_n = 1.0; //to avoid surface intrusion (@nose_mid_pt is on the negative side of center plane)
    
    var hood_end_pt = [0.0 + 1.5 * Input[0] - origin[0], 0.0 - origin[1], 1.2 + 0.5 * Input[1] - origin[2]];
    var roof_start_pt = [hood_end_pt[0] + 1.0 + 2.0 * Input[2], 0.0, hood_end_pt[2] + 1.0 + 0.5 * Input[3]];
    
    var temp = normalize(dvec(roof_start_pt, hood_end_pt))[0] * (0.8 + 0.2 * Input[4]);
    var fw_vec = [temp, 0.0, Math.sqrt(1.0-temp*temp)];
    var fw_n = (roof_start_pt[2] - hood_end_pt[2])*0.5/ fw_vec[2] +  (roof_start_pt[2] - hood_end_pt[2])*0.5/ fw_vec[2] * Input[5];
    var fw_ctrl_pt = [hood_end_pt[0] + fw_n*fw_vec[0], hood_end_pt[1] + fw_n*fw_vec[1], hood_end_pt[2] + fw_n*fw_vec[2]];
    
    var roof_vec = normalize(dvec(roof_start_pt, fw_ctrl_pt));
    temp = Math.min((1.0 + (roof_end_pt_x - roof_start_pt[0])* 0.5)*roof_vec[2]/roof_vec[0]+roof_start_pt[2], roof_end_pt_z+0.2);
    var roof_end_pt = [roof_start_pt[0] + 1.0 + (roof_end_pt_x - roof_start_pt[0])* Input[6], 0.0, (roof_end_pt_z+temp)*0.5 + (temp - roof_end_pt_z)*0.5*Input[7]];
    var rf_n = 0.5;
    var roof_ctrl_pt = [roof_start_pt[0] + rf_n*roof_vec[0], roof_start_pt[1] + rf_n*roof_vec[1], roof_start_pt[2] + rf_n*roof_vec[2]];
    
    var bw_vec = normalize(dvec(roof_end_pt, roof_ctrl_pt));
    var bw_end_pt = [bw_end_pt_x, 0.0, Math.min(roof_end_pt[2]-1, bw_end_pt_z + (roof_end_pt[2]-1 - bw_end_pt_z)* Input[8])];
    
//    var aa = getAngle(hood_end_pt,roof_start_pt,bw_end_pt);
//    var bb = getAngle(bw_end_pt,hood_end_pt,roof_end_pt);
//    var cc = getAngle(hood_end_pt,roof_ctrl_pt,bw_end_pt);
//    var dd = getAngle(bw_end_pt,hood_end_pt,roof_ctrl_pt);
    var ee = getAngle(roof_ctrl_pt,hood_end_pt,bw_end_pt);
    var ff = getAngle(roof_ctrl_pt,roof_start_pt,roof_end_pt);
    var aa = Math.abs(ee-ff)*(geoDistance(roof_ctrl_pt,roof_start_pt)+geoDistance(roof_ctrl_pt,roof_end_pt));
    return [aa];
}

function calLength(Input){
	var origin = [5, 0, 0];
    var well_scale = 2.0;
    var r_wheel = 0.60;
    var wheel_scale = 1.2;
    var box_r = 10.0;
    var clearance = 0.7*r_wheel;
    var box_l = origin[0]-2*r_wheel;
    var box_u = 2.5*r_wheel;
    var roof_end_pt_x = 5.0 - origin[0]; //higher limit on @roof_end_pt
    var bw_end_pt_x = 7.5 - origin[0]; //higher limit on @bw_end_pt
    var roof_end_pt_z = r_wheel * well_scale + 1.5 - origin[2]; //lower limit on @roof_end_pt   
    var bw_end_pt_z = r_wheel*well_scale*wheel_scale*1.1+0.1; //lower limit on @bw_end_pt
    var hood_u_n = 1.0; //to avoid surface intrusion (@nose_mid_pt is on the negative side of center plane)
    
    var hood_end_pt = [0.0 + 1.5 * Input[0] - origin[0], 0.0 - origin[1], 1.2 + 0.5 * Input[1] - origin[2]];
    var roof_start_pt = [hood_end_pt[0] + 1.0 + 2.0 * Input[2], 0.0, hood_end_pt[2] + 1.0 + 0.5 * Input[3]];
    
    var temp = normalize(dvec(roof_start_pt, hood_end_pt))[0] * (0.8 + 0.2 * Input[4]);
    var fw_vec = [temp, 0.0, Math.sqrt(1.0-temp*temp)];
    var fw_n = (roof_start_pt[2] - hood_end_pt[2])*0.5/ fw_vec[2] +  (roof_start_pt[2] - hood_end_pt[2])*0.5/ fw_vec[2] * Input[5];
    var fw_ctrl_pt = [hood_end_pt[0] + fw_n*fw_vec[0], hood_end_pt[1] + fw_n*fw_vec[1], hood_end_pt[2] + fw_n*fw_vec[2]];
    
    var roof_vec = normalize(dvec(roof_start_pt, fw_ctrl_pt));
    temp = Math.min((1.0 + (roof_end_pt_x - roof_start_pt[0])* 0.5)*roof_vec[2]/roof_vec[0]+roof_start_pt[2], roof_end_pt_z+0.2);
    var roof_end_pt = [roof_start_pt[0] + 1.0 + (roof_end_pt_x - roof_start_pt[0])* Input[6], 0.0, (roof_end_pt_z+temp)*0.5 + (temp - roof_end_pt_z)*0.5*Input[7]];
    var rf_n = 0.5;
    var roof_ctrl_pt = [roof_start_pt[0] + rf_n*roof_vec[0], roof_start_pt[1] + rf_n*roof_vec[1], roof_start_pt[2] + rf_n*roof_vec[2]];
    
    var bw_vec = normalize(dvec(roof_end_pt, roof_ctrl_pt));
    var bw_end_pt = [bw_end_pt_x, 0.0, Math.min(roof_end_pt[2]-1, bw_end_pt_z + (roof_end_pt[2]-1 - bw_end_pt_z)* Input[8])];

    var aa = geoDistance(roof_ctrl_pt,hood_end_pt);
    var bb = geoDistance(bw_end_pt,hood_end_pt);
    var cc = geoDistance(roof_ctrl_pt,bw_end_pt);
    var dd = geoDistance(roof_start_pt,roof_ctrl_pt);
    var ee = geoDistance(roof_start_pt,roof_end_pt);
    var ff = geoDistance(roof_ctrl_pt,roof_end_pt);
    var gg = geoDistance(roof_end_pt,hood_end_pt);
//    return [aa,bb,cc,dd,ee,ff,gg,hh,ii];
    return [aa,bb,cc,dd,ee,ff];
}

function geoDistance(x,y){
	var ddd = 0;
	for(var i=0;i<x.length;i++){
//		ddd+=Math.abs(x[i]-y[i]);
		ddd+=(x[i]-y[i])*(x[i]-y[i]);
	}
	ddd = Math.sqrt(ddd);
	return ddd;
}
function calDistance(t,x){
//	return geoDistance(calAngle(t),calAngle(x));
	return geoDistance(calLength(t),calLength(x));
}

function getInd(o){
	o.ind = [];
	o.fval = [];
	o.fvaleu = [];
	p=20;
	numiter = d.dataArray.datArray.length;
	numdata = d.dataArray.datArray[numiter-1].length;
	for (var i=0;i<numiter;i++){
		var temind = [];
		var temfval= [];
		var temfvaleu = [];
		for (var j=0;j<d.dataArray.datArray[i].length;j++){
			var a = d.dataArray.datArray[i][j][0];
			for (var k=0;k<numdata;k++){
				var b = d.dataArray.datArray[numiter-1][k][0];
				if (Math.abs(a-b)<0.000001){temind[j]=k;break;}
			}
			temfval[j]=o.distance[temind[j]];
			temfvaleu[j]=o.distanceeu[temind[j]];
		}
		o.ind[i]=temind;
		o.fval[i]=temfval;
		o.fvaleu[i]=temfvaleu;
	}
}

function getAngle(p1,p2,p3){
	var a = geoDistance(p1,p2);
	var b = geoDistance(p1,p3);
	var c = geoDistance(p2,p3);
	return Math.acos((a*a+b*b-c*c)/(2*a*b));
}